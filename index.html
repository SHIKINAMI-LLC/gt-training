<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GT RACER TRAINING APP</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'racing-red': '#DC2626',
            'racing-orange': '#F97316',
            'racing-yellow': '#FBBF24',
            'bg-dark': '#111827',
            'bg-card': '#1F2937',
          }
        }
      }
    }
  </script>
  <style>
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    .tab-active { color: #DC2626; }
    .tab-inactive { color: #9CA3AF; }
    @keyframes slideIn {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .animate-slide-in { animation: slideIn 0.3s ease-out; }
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    .animate-pulse-once { animation: pulse 0.5s ease-in-out; }
    .science-badge {
      display: inline-block;
      background: linear-gradient(135deg, #1e3a5f, #0f2027);
      border: 1px solid #2563eb;
      color: #93c5fd;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 4px;
      margin-top: 4px;
    }
    .f1-badge {
      display: inline-block;
      background: linear-gradient(135deg, #7f1d1d, #450a0a);
      border: 1px solid #DC2626;
      color: #fca5a5;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 4px;
      margin-top: 4px;
      margin-left: 4px;
    }
    .safety-badge {
      display: inline-block;
      background: linear-gradient(135deg, #14532d, #052e16);
      border: 1px solid #16a34a;
      color: #86efac;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 4px;
      margin-top: 4px;
      margin-left: 4px;
    }
    .new-badge {
      display: inline-block;
      background: linear-gradient(135deg, #4c1d95, #2e1065);
      border: 1px solid #7c3aed;
      color: #c4b5fd;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 4px;
      margin-top: 4px;
      margin-left: 4px;
    }
  </style>
</head>
<body class="bg-bg-dark text-white min-h-screen">

  <div id="app" class="pb-20"></div>

  <!-- Bottom Navigation -->
  <nav class="fixed bottom-0 left-0 right-0 bg-bg-card border-t border-gray-700 px-4 py-3 z-50">
    <div class="flex justify-around items-center">
      <button onclick="showPage('home')" id="tab-home" class="flex flex-col items-center gap-1 tab-active">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
        </svg>
        <span class="text-xs">ãƒ›ãƒ¼ãƒ </span>
      </button>
      <button onclick="showPage('progress')" id="tab-progress" class="flex flex-col items-center gap-1 tab-inactive">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
        <span class="text-xs">é€²æ—</span>
      </button>
      <button onclick="showPage('science')" id="tab-science" class="flex flex-col items-center gap-1 tab-inactive">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
        </svg>
        <span class="text-xs">ç§‘å­¦æ ¹æ‹ </span>
      </button>
      <button onclick="showPage('history')" id="tab-history" class="flex flex-col items-center gap-1 tab-inactive">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
        <span class="text-xs">å±¥æ­´</span>
      </button>
      <button onclick="showPage('settings')" id="tab-settings" class="flex flex-col items-center gap-1 tab-inactive">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
        </svg>
        <span class="text-xs">è¨­å®š</span>
      </button>
    </div>
  </nav>

  <!-- EXP Gain Modal -->
  <div id="exp-modal" class="hidden fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50">
    <div class="text-center animate-pulse-once">
      <div id="exp-amount" class="text-6xl font-bold text-racing-yellow mb-4">+100 EXP!</div>
      <div id="rank-up-msg" class="text-2xl font-bold text-white hidden">ğŸ‰ ãƒ©ãƒ³ã‚¯ã‚¢ãƒƒãƒ—ï¼</div>
    </div>
  </div>

  <script>
    // ========== DATA ==========
    const RANKS = [
      { rank: 'Rookie', minExp: 0, maxExp: 499, color: '#10B981', icon: 'ğŸŸ¢' },
      { rank: 'Amateur', minExp: 500, maxExp: 1499, color: '#3B82F6', icon: 'ğŸ”µ' },
      { rank: 'Semi-Pro', minExp: 1500, maxExp: 2999, color: '#FBBF24', icon: 'ğŸŸ¡' },
      { rank: 'Pro', minExp: 3000, maxExp: 4999, color: '#F97316', icon: 'ğŸŸ ' },
      { rank: 'Elite', minExp: 5000, maxExp: 7499, color: '#DC2626', icon: 'ğŸ”´' },
      { rank: 'Legend', minExp: 7500, maxExp: Infinity, color: '#000000', icon: 'âš«' },
    ];

    // ========== SCIENCE NOTES ==========
    const SCIENCE_NOTES = [
      {
        category: 'Zone 2 å¿ƒæ‹æ•°',
        icon: 'â¤ï¸',
        title: 'Zone 2ã®æ­£ç¢ºãªå®šç¾©ï¼ˆ2024å¹´æ”¹è¨‚ï¼‰',
        content: 'æ—§è¨­å®šã®110-130 bpmã¯Zone 1ï¼ˆå®Œå…¨å›å¾©åŸŸï¼‰ã€‚33æ­³ã®æ¨å®šæœ€å¤§å¿ƒæ‹æ•°187 bpmã«åŸºã¥ãZone 2ã¯130-145 bpmã€‚',
        source: 'IJSPP 2024 â€” International Journal of Sports Physiology and Performance',
        badge: 'science'
      },
      {
        category: 'é¦–Gãƒ•ã‚©ãƒ¼ã‚¹å¯¾ç­–',
        icon: 'ğŸ”´',
        title: 'Red Bullå…¬å¼: é¦–å¼·åŒ–ãƒ—ãƒ­ã‚°ãƒ©ãƒ ',
        content: 'F1ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¯5-6Gã®æ¨ªåŠ é€Ÿåº¦ã«å¯¾å¿œã™ã‚‹é¦–ã‚’æŒã¤ã€‚ç­‰å°ºæ€§æœ€å¤§åç¸®ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ãŒæœ€ã‚‚åŠ¹æœçš„ã€‚ãƒ—ãƒ­ã¯ç´”ç²‹ãªé¦–ç­‹åŠ›ã§40kgä»¥ä¸Šã«å¯¾å¿œã€‚',
        source: 'Red Bull Racing å…¬å¼ + PMC - Cervical Strengthening in Racing Drivers',
        badge: 'f1'
      },
      {
        category: 'ã‚°ãƒªãƒƒãƒ—ãƒ»å‰è…•',
        icon: 'ğŸ’ª',
        title: 'Red Bullå…¬å¼: å‰è…•ã¨ã‚°ãƒªãƒƒãƒ—ã®é‡è¦æ€§',
        content: 'F1ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã®ç›®æ¨™ã‚°ãƒªãƒƒãƒ—åŠ›ã¯55kgä»¥ä¸Šã€‚ã‚¹ãƒ†ã‚¢ãƒªãƒ³ã‚°åŠ›ã¯æœ€å¤§50kgfã€‚ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°ãƒ»ãƒ•ã‚¡ãƒ¼ãƒãƒ¼ã‚ºã‚­ãƒ£ãƒªãƒ¼ãŒæ¨å¥¨ã€‚',
        source: 'Red Bull Racing å…¬å¼ + StrengthLog - Motorsports Strength Training',
        badge: 'f1'
      },
      {
        category: 'ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªã‚¯ã‚¹å®‰å…¨æ€§',
        icon: 'ğŸ¦µ',
        title: 'ãƒ©ãƒ³ãƒŠãƒ¼ã‚ºãƒ‹ãƒ¼å¾©å¸°ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³',
        content: 'Week 1ã§ã®ã‚¸ãƒ£ãƒ³ãƒ—ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆãƒ»ã‚¹ãƒ—ãƒªãƒƒãƒˆã‚¸ãƒ£ãƒ³ãƒ—ã¯è†ã¸ã®è¡æ’ƒãŒä½“é‡ã®2-4å€ã€‚ãƒ©ãƒ³ãƒŠãƒ¼ã‚ºãƒ‹ãƒ¼å¾Œã¯æœ€ä½2é€±é–“é«˜è¡æ’ƒã‚’æ§ãˆã‚‹ã¹ãã€‚',
        source: 'JOSPT 2019 â€” Journal of Orthopaedic & Sports Physical Therapy',
        badge: 'safety'
      },
      {
        category: 'åã‚Šè…°æ”¹å–„',
        icon: 'ğŸ§˜',
        title: 'éª¨ç›¤å‰å‚¾ã®ç§‘å­¦çš„çŸ¯æ­£æ³•ï¼ˆ2024ï¼‰',
        content: 'å¤§è‡€ç­‹ã®åç¸®ãŒéª¨ç›¤å¾Œå‚¾ã®ä¸»è¦æˆ¦ç•¥ã€‚è…¹æ¨ªç­‹ã®æ´»æ€§åŒ–ã§æ·±éƒ¨ã‚³ã‚¢ãŒæ©Ÿèƒ½ã™ã‚‹ã€‚ãƒ‡ãƒƒãƒ‰ãƒã‚°ãƒ»ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ãŒæœ€ã‚‚è¨¼æ‹ ã«åŸºã¥ãæ‰‹æ³•ã€‚',
        source: 'PMC 2024 â€” Muscular Strategies for Pelvic Correction',
        badge: 'science'
      },
      {
        category: 'McLaren å…¬å¼',
        icon: 'ğŸï¸',
        title: 'McLarenãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å“²å­¦',
        content: 'å†¬å ´ã«é‡ã„ç­‹ãƒˆãƒ¬ã‚’é›†ä¸­å®Ÿæ–½ã€‚1æ—¥3ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼ˆæœ:ãƒ¢ãƒ“ãƒªãƒ†ã‚£/æ˜¼:ç­‹åŠ›/å¤œ:å›å¾©ï¼‰ã€‚é¦–å¼·åŒ–ãŒã‚·ãƒ¼ã‚ºãƒ³å‰ã®æœ€é‡è¦èª²é¡Œã€‚',
        source: 'McLaren Racing å…¬å¼ + Technogym Partnership',
        badge: 'f1'
      },
      {
        category: 'åå¿œé€Ÿåº¦',
        icon: 'âš¡',
        title: 'F1å…¬å¼: åå¿œé€Ÿåº¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°',
        content: 'F1ãƒ‰ãƒ©ã‚¤ãƒãƒ¼å¹³å‡åå¿œé€Ÿåº¦0.2-0.3ç§’ã€‚é€±4-5å›ã®åå¿œãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã§10-20%æ”¹å–„å¯èƒ½ã€‚ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆå¯è¦–åŒ–ï¼‰ãŒFerrari/McLarenã§æ¡ç”¨ã€‚',
        source: 'Formula1.com å…¬å¼ + Motiv8 Training Research',
        badge: 'f1'
      },
      {
        category: 'æ „é¤Šã‚¿ã‚¤ãƒŸãƒ³ã‚°',
        icon: 'ğŸ³',
        title: 'ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°å¾Œ30åˆ†ä»¥å†…ã®ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³',
        content: 'é‹å‹•å¾Œ30åˆ†ä»¥å†…ã«20-40gã®ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã‚’æ‘‚å–ã™ã‚‹ã“ã¨ã§ç­‹ã‚¿ãƒ³ãƒ‘ã‚¯åˆæˆãŒ+47%å‘ä¸Šã€‚ç„¡èª¿æ•´ã‚½ã‚¤ãƒ©ãƒ†ãŒä¾¿åˆ©ã€‚',
        source: 'IJSN 2021 â€” International Journal of Sport Nutrition',
        badge: 'science'
      }
    ];

    // ========== WEEK 1 MISSIONS (å…¨7æ—¥) ==========
    const WEEK1_MISSIONS = [
      {
        date: '2026-02-18',
        dayNumber: 1,
        dayName: 'LOWER POWER',
        theme: 'ã‚°ãƒªãƒƒãƒ—åŸºç¤ã‚’è¿½åŠ ã—ãŸä¸‹åŠèº«+ä½“å¹¹',
        scienceNote: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ãŒå¤§è‡€ç­‹åç¸®â†’éª¨ç›¤å¾Œå‚¾ã®ä¸»è¦æˆ¦ç•¥ï¼ˆPMC 2024ï¼‰',
        missions: [
          {
            id: 'm1-req1',
            type: 'required1',
            title: 'å¿…é ˆ1: ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³',
            description: 'åã‚Šè…°æ”¹å–„ + å·¦è‚©ãƒªãƒãƒ“ãƒª',
            duration: '10-15åˆ†',
            exp: 50,
            scienceBadge: 'science',
            exercises: [
              { name: 'ã‚­ãƒ£ãƒƒãƒˆã‚«ã‚¦', detail: '10å›ï¼ˆéª¨ç›¤å‰å¾Œå‚¾ã‚’æ„è­˜ï¼‰' },
              { name: 'ãƒ‡ãƒƒãƒ‰ãƒã‚°', detail: 'å·¦å³10å›Ã—2ã‚»ãƒƒãƒˆï¼ˆè…°ã‚’åºŠã«æŠ¼ã—ä»˜ã‘ã‚‹ï¼ï¼‰' },
              { name: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸', detail: '15å›Ã—2ã‚»ãƒƒãƒˆï¼ˆãƒˆãƒƒãƒ—ã§2ç§’ãŠå°»ã‚’ç· ã‚ã‚‹ï¼‰' },
              { name: 'è…¸è…°ç­‹ã‚¹ãƒˆãƒ¬ãƒƒãƒ', detail: 'å·¦å³30ç§’Ã—2ã‚»ãƒƒãƒˆï¼ˆéª¨ç›¤å¾Œå‚¾ã‚’ä¿æŒï¼‰' },
              { name: 'ã‚¯ãƒ©ãƒ ã‚·ã‚§ãƒ«', detail: 'å·¦å³15å›Ã—2ã‚»ãƒƒãƒˆï¼ˆãŠå°»ã®æ¨ªã«åŠ¹ã‹ã›ã‚‹ï¼‰' }
            ]
          },
          {
            id: 'm1-req2',
            type: 'required2',
            title: 'å¿…é ˆ2: ä¸‹åŠèº«ãƒ‘ãƒ¯ãƒ¼ + ã‚°ãƒªãƒƒãƒ—åŸºç¤',
            description: 'ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°è¿½åŠ ï¼ˆRed Bullå…¬å¼ã‚°ãƒªãƒƒãƒ—å¼·åŒ–ï¼‰',
            duration: '25åˆ†',
            exp: 100,
            scienceBadge: 'f1',
            exercises: [
              { name: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸å¼·åŒ–ç‰ˆï¼ˆç‰‡è„šï¼‰', detail: '20å›Ã—3ã‚»ãƒƒãƒˆï¼ˆå³10+å·¦10=20å›ï¼‰' },
              { name: 'ãƒ–ãƒ«ã‚¬ãƒªã‚¢ãƒ³ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆ', detail: 'å·¦å³12å›Ã—3ã‚»ãƒƒãƒˆï¼ˆè†ãŒã¤ã¾å…ˆã‚’è¶…ãˆãªã„ï¼‰' },
              { name: 'ğŸ†• ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°', detail: '30ç§’Ã—3ã‚»ãƒƒãƒˆï¼ˆã‚°ãƒªãƒƒãƒ—åŸºç¤ã€‚è‚©ç”²éª¨ã‚’ä¸‹ã’ã‚‹ï¼‰' },
              { name: 'ã‚«ãƒ¼ãƒ•ãƒ¬ã‚¤ã‚º', detail: '20å›Ã—3ã‚»ãƒƒãƒˆï¼ˆãƒˆãƒƒãƒ—ã§2ç§’ï¼‰' },
              { name: 'ãƒ—ãƒ©ãƒ³ã‚¯', detail: '3åˆ†Ã—2ã‚»ãƒƒãƒˆï¼ˆãƒãƒ£ãƒ¬ãƒ³ã‚¸ï¼šç‰‡æ‰‹ã‚’å‰ã«ä¼¸ã°ã™ï¼‰' }
            ]
          },
          {
            id: 'm1-bonus',
            type: 'bonus',
            title: 'ãƒœãƒ¼ãƒŠã‚¹: è¿½åŠ HIIT',
            description: 'ã‚¿ãƒã‚¿å¼ãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚¯ãƒ©ã‚¤ãƒãƒ¼',
            duration: '3åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚¯ãƒ©ã‚¤ãƒãƒ¼', detail: '20ç§’å…¨åŠ› / 10ç§’ä¼‘æ†© Ã— 4ãƒ©ã‚¦ãƒ³ãƒ‰' }
            ]
          }
        ]
      },
      {
        date: '2026-02-19',
        dayNumber: 2,
        dayName: 'ZONE 2 CARDIO',
        theme: 'å¿ƒæ‹130-145 bpmã«ä¿®æ­£ï¼ˆç§‘å­¦çš„Zone 2ï¼‰',
        scienceNote: '33æ­³æœ€å¤§å¿ƒæ‹187 bpm â†’ Zone 2 = 131-150 bpmï¼ˆIJSPP 2024ï¼‰ã€‚æ—§è¨­å®š110-130ã¯Zone 1ã€‚',
        missions: [
          {
            id: 'm2-req1',
            type: 'required1',
            title: 'å¿…é ˆ1: ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³',
            description: 'åã‚Šè…°æ”¹å–„ + å·¦è‚©ãƒªãƒãƒ“ãƒª',
            duration: '10-15åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ã‚­ãƒ£ãƒƒãƒˆã‚«ã‚¦', detail: '10å›' },
              { name: 'ãƒ‡ãƒƒãƒ‰ãƒã‚°', detail: 'å·¦å³10å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸', detail: '15å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'è…¸è…°ç­‹ã‚¹ãƒˆãƒ¬ãƒƒãƒ', detail: 'å·¦å³30ç§’Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚¯ãƒ©ãƒ ã‚·ã‚§ãƒ«', detail: 'å·¦å³15å›Ã—2ã‚»ãƒƒãƒˆ' }
            ]
          },
          {
            id: 'm2-req2',
            type: 'required2',
            title: 'å¿…é ˆ2: ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚° Zone 2',
            description: 'âœ…ä¿®æ­£: å¿ƒæ‹130-145 bpmï¼ˆæ—§110-130ã¯ç§‘å­¦çš„ã«Zone 1ï¼‰',
            duration: '40-50åˆ†',
            exp: 100,
            scienceBadge: 'science',
            exercises: [
              { name: 'ğŸ”´ ä¿®æ­£: ç›®æ¨™å¿ƒæ‹æ•°', detail: '130-145 bpmï¼ˆæ—§è¨­å®š110-130ã¯èª¤ã‚Šï¼‰' },
              { name: 'ä¸»æŒ‡æ¨™: ä¼šè©±ãƒ†ã‚¹ãƒˆ', detail: 'çŸ­æ–‡ã¯è¨€ãˆã‚‹ãŒé•·ã„ä¼šè©±ã¯è¾›ã„ã€‚é¼»å‘¼å¸ãŒã‚„ã‚„è‹¦ã—ã„' },
              { name: 'RPEï¼ˆä½“æ„Ÿå¼·åº¦ï¼‰', detail: '10/20ï¼ˆBorgã‚¹ã‚±ãƒ¼ãƒ«ï¼‰' },
              { name: 'ã‚±ã‚¤ãƒ‡ãƒ³ã‚¹', detail: '80-90 rpm' },
              { name: '145bpmè¶…ãˆãŸã‚‰', detail: 'ãƒšãƒ¼ã‚¹ã‚’å³åº§ã«è½ã¨ã™ï¼ˆZone 3ã‚µã‚¤ãƒ³ï¼‰' }
            ]
          },
          {
            id: 'm2-bonus',
            type: 'bonus',
            title: 'ãƒœãƒ¼ãƒŠã‚¹: è¿½åŠ 10åˆ†å»¶é•·',
            description: 'åˆè¨ˆ60åˆ†ï¼ˆMcLarenæœ‰é…¸ç´ ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰æŒ‡é‡ï¼‰',
            duration: '10åˆ†',
            exp: 50,
            scienceBadge: 'f1',
            exercises: [
              { name: 'ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚°å»¶é•·', detail: '+10åˆ†ï¼ˆåˆè¨ˆ60åˆ†ï¼‰ã€‚å¿ƒæ‹130-145ç¶­æŒã®ã¾ã¾ã€‚' }
            ]
          }
        ]
      },
      {
        date: '2026-02-20',
        dayNumber: 3,
        dayName: 'UPPER + NECK + GRIP',
        theme: 'é¦–ãƒˆãƒ¬F1åŸºæº–å¼·åŒ– + ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°45ç§’',
        scienceNote: 'ç­‰å°ºæ€§æœ€å¤§åç¸®: å±ˆæ›²åŠ›+110%ã€å›æ—‹+76%ã€ä¼¸å±•+69%ï¼ˆPMC - Racing Drivers Studyï¼‰',
        missions: [
          {
            id: 'm3-req1',
            type: 'required1',
            title: 'å¿…é ˆ1: ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³',
            description: 'åã‚Šè…°æ”¹å–„ + å·¦è‚©ãƒªãƒãƒ“ãƒª',
            duration: '10-15åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ã‚­ãƒ£ãƒƒãƒˆã‚«ã‚¦', detail: '10å›' },
              { name: 'ãƒ‡ãƒƒãƒ‰ãƒã‚°', detail: 'å·¦å³10å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸', detail: '15å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'è…¸è…°ç­‹ã‚¹ãƒˆãƒ¬ãƒƒãƒ', detail: 'å·¦å³30ç§’Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚¯ãƒ©ãƒ ã‚·ã‚§ãƒ«', detail: 'å·¦å³15å›Ã—2ã‚»ãƒƒãƒˆ' }
            ]
          },
          {
            id: 'm3-req2',
            type: 'required2',
            title: 'å¿…é ˆ2: ä¸ŠåŠèº« + é¦–Gå¼·åŒ– + ã‚°ãƒªãƒƒãƒ—',
            description: 'F1å…¬å¼: é¦–=æœ€é‡è¦ã€‚Red Bull: ã‚°ãƒªãƒƒãƒ—55kgç›®æ¨™',
            duration: '25åˆ†',
            exp: 100,
            scienceBadge: 'f1',
            exercises: [
              { name: 'æ‡¸å‚', detail: '3å›Ã—3ã‚»ãƒƒãƒˆï¼ˆ3ç§’ã‹ã‘ã¦ã‚†ã£ãã‚Šä¸‹ã‚Šã‚‹ï¼‰' },
              { name: 'ğŸ†• ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°', detail: '45ç§’Ã—3ã‚»ãƒƒãƒˆï¼ˆDay1ã®30ç§’ã‹ã‚‰å»¶é•·ï¼‰' },
              { name: 'è…•ç«‹ã¦ä¼ã›', detail: '20å›Ã—3ã‚»ãƒƒãƒˆ' },
              { name: 'ğŸ†• é¦–ã‚¢ã‚¤ã‚½ãƒ¡ãƒˆãƒªãƒƒã‚¯å£æŠ¼ã—', detail: '4æ–¹å‘ Ã— 10ç§’ Ã— 3ã‚»ãƒƒãƒˆï¼ˆ70-80%ã®åŠ›ã§ï¼ï¼‰' },
              { name: 'ğŸ†• ã‚¿ã‚ªãƒ«æŠµæŠ—é¦–ãƒˆãƒ¬', detail: '4æ–¹å‘ Ã— 15å› Ã— 2ã‚»ãƒƒãƒˆï¼ˆç›®æ¨™: 40kgå¯¾å¿œåŠ›ï¼‰' },
              { name: 'ãƒ‹ãƒ¼ãƒ¬ã‚¤ã‚º', detail: '15å›Ã—3ã‚»ãƒƒãƒˆ' }
            ]
          },
          {
            id: 'm3-bonus',
            type: 'bonus',
            title: 'ãƒœãƒ¼ãƒŠã‚¹: é¦–Gãƒ•ã‚©ãƒ¼ã‚¹å¼·åŒ–',
            description: 'è¿½åŠ 5åˆ†ï¼ˆ10ç§’â†’15ç§’ã«å»¶é•· or è¿½åŠ ã‚»ãƒƒãƒˆï¼‰',
            duration: '5åˆ†',
            exp: 50,
            scienceBadge: 'f1',
            exercises: [
              { name: 'ã‚¢ã‚¤ã‚½ãƒ¡ãƒˆãƒªãƒƒã‚¯å»¶é•·', detail: '10ç§’â†’15ç§’ã«å¤‰æ›´ã€ã¾ãŸã¯5ã‚»ãƒƒãƒˆç›®è¿½åŠ ' }
            ]
          }
        ]
      },
      {
        date: '2026-02-21',
        dayNumber: 4,
        dayName: 'HIIT + SAFE TRAINING',
        theme: 'âš ï¸å®‰å…¨ç‰ˆ: ã‚¸ãƒ£ãƒ³ãƒ—ç³»â†’ä½è¡æ’ƒã«å…¨é¢æ”¹è¨‚',
        scienceNote: 'è†è“‹å¤§è…¿éƒ¨ç—‡å€™ç¾¤å¾Œã¯æœ€ä½2é€±é–“é«˜è¡æ’ƒç¦æ­¢ï¼ˆJOSPT 2019ï¼‰ã€‚ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ãƒ»ç¸„è·³ã³ã¯ç€åœ°è¡æ’ƒã‚’æŠ‘ãˆã¤ã¤åŒç­‰ã®ç­‹åŠ›å¼·åŒ–ãŒå¯èƒ½ã€‚',
        missions: [
          {
            id: 'm4-req1',
            type: 'required1',
            title: 'å¿…é ˆ1: ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³',
            description: 'åã‚Šè…°æ”¹å–„ + å·¦è‚©ãƒªãƒãƒ“ãƒª',
            duration: '10-15åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ã‚­ãƒ£ãƒƒãƒˆã‚«ã‚¦', detail: '10å›' },
              { name: 'ãƒ‡ãƒƒãƒ‰ãƒã‚°', detail: 'å·¦å³10å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸', detail: '15å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'è…¸è…°ç­‹ã‚¹ãƒˆãƒ¬ãƒƒãƒ', detail: 'å·¦å³30ç§’Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚¯ãƒ©ãƒ ã‚·ã‚§ãƒ«', detail: 'å·¦å³15å›Ã—2ã‚»ãƒƒãƒˆ' }
            ]
          },
          {
            id: 'm4-req2',
            type: 'required2',
            title: 'å¿…é ˆ2: HIIT + å®‰å…¨ãªä¸‹åŠèº«ãƒˆãƒ¬',
            description: 'ğŸ›¡ï¸ã‚¸ãƒ£ãƒ³ãƒ—ã‚¹ã‚¯ãƒ¯ãƒƒãƒˆå‰Šé™¤â†’ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—+ç¸„è·³ã³ã«å¤‰æ›´ï¼ˆè†å®‰å…¨ï¼‰',
            duration: '20åˆ†',
            exp: 100,
            scienceBadge: 'safety',
            exercises: [
              { name: 'ãƒãƒ¼ãƒ”ãƒ¼ï¼ˆã‚¸ãƒ£ãƒ³ãƒ—ãªã—ï¼‰ã‚¿ãƒã‚¿', detail: '20ç§’å…¨åŠ› / 10ç§’ä¼‘æ†© Ã— 6ãƒ©ã‚¦ãƒ³ãƒ‰' },
              { name: 'ğŸ†• ã‚¹ãƒ†ãƒƒãƒ—ã‚¢ãƒƒãƒ—ï¼ˆæ¤…å­ï¼‰', detail: 'å·¦å³15å›Ã—3ã‚»ãƒƒãƒˆï¼ˆ3ç§’ã§ã‚†ã£ãã‚Šé™ã‚Šã‚‹ã€‚ç€åœ°è¡æ’ƒã‚¼ãƒ­ï¼‰' },
              { name: 'ğŸ†• ãƒ©ãƒ†ãƒ©ãƒ«ãƒãƒ³ãƒ‰ã‚¦ã‚©ãƒ¼ã‚¯', detail: 'å·¦å³15æ­©Ã—3ã‚»ãƒƒãƒˆï¼ˆä¸­è‡€ç­‹å¼·åŒ–â†’ãƒ©ãƒ³ãƒŠãƒ¼ã‚ºãƒ‹ãƒ¼äºˆé˜²ï¼‰' },
              { name: 'ğŸ†• ç¸„è·³ã³ï¼ˆé€šå¸¸è·³ã³ï¼‰', detail: '1åˆ†Ã—3ã‚»ãƒƒãƒˆï¼ˆè†ã‚’è»½ãæ›²ã’ã¦ãƒãƒã«ã™ã‚‹ï¼‰' }
            ]
          },
          {
            id: 'm4-bonus',
            type: 'bonus',
            title: 'ãƒœãƒ¼ãƒŠã‚¹: ã‚¿ãƒã‚¿å¼8ãƒ©ã‚¦ãƒ³ãƒ‰é”æˆ',
            description: 'ãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚¯ãƒ©ã‚¤ãƒãƒ¼ã§8ãƒ©ã‚¦ãƒ³ãƒ‰ ğŸ”¥ Tabata Pro',
            duration: '4åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚¯ãƒ©ã‚¤ãƒãƒ¼', detail: '20ç§’å…¨åŠ› / 10ç§’ä¼‘æ†© Ã— 8ãƒ©ã‚¦ãƒ³ãƒ‰' }
            ]
          }
        ]
      },
      {
        date: '2026-02-22',
        dayNumber: 5,
        dayName: 'LONG SESSION',
        theme: 'é•·æ™‚é–“Zone 2 + McLarenæ°´åˆ†è£œçµ¦ãƒ—ãƒ­ãƒˆã‚³ãƒ«',
        scienceNote: '60åˆ†ä»¥ä¸Šã®æœ‰é…¸ç´ ã¯è£œçµ¦ãŒå¿…è¦ã€‚McLarenå…¬å¼: 30åˆ†ã”ã¨ã«ã‚¨ãƒãƒ«ã‚®ãƒ¼è£œçµ¦ã€‚çµ‚äº†å¾Œ30åˆ†ä»¥å†…ã«ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³æ‘‚å–ï¼ˆIJSN 2021ï¼‰ã€‚',
        missions: [
          {
            id: 'm5-req1',
            type: 'required1',
            title: 'å¿…é ˆ1: ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³',
            description: 'åã‚Šè…°æ”¹å–„ + å·¦è‚©ãƒªãƒãƒ“ãƒª',
            duration: '10-15åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ã‚­ãƒ£ãƒƒãƒˆã‚«ã‚¦', detail: '10å›' },
              { name: 'ãƒ‡ãƒƒãƒ‰ãƒã‚°', detail: 'å·¦å³10å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸', detail: '15å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'è…¸è…°ç­‹ã‚¹ãƒˆãƒ¬ãƒƒãƒ', detail: 'å·¦å³30ç§’Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚¯ãƒ©ãƒ ã‚·ã‚§ãƒ«', detail: 'å·¦å³15å›Ã—2ã‚»ãƒƒãƒˆ' }
            ]
          },
          {
            id: 'm5-req2',
            type: 'required2',
            title: 'å¿…é ˆ2: ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚° 60-90åˆ†',
            description: 'Zone 2ï¼ˆ130-145 bpmï¼‰+ McLarenè£œçµ¦ãƒ—ãƒ­ãƒˆã‚³ãƒ«',
            duration: '60-90åˆ†',
            exp: 100,
            scienceBadge: 'f1',
            exercises: [
              { name: 'ç›®æ¨™å¿ƒæ‹æ•°', detail: '130-145 bpmï¼ˆä¼šè©±ãƒ†ã‚¹ãƒˆä¸»æŒ‡æ¨™ï¼‰' },
              { name: 'è£œçµ¦: é–‹å§‹å‰', detail: 'æ°´300-500ml' },
              { name: 'è£œçµ¦: 30åˆ†çµŒé', detail: 'ãƒãƒŠãƒŠåŠæœ¬ or ãƒãƒãƒŸãƒ„1æ¯ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ç¶­æŒï¼‰' },
              { name: 'è£œçµ¦: 60åˆ†çµŒé', detail: 'æ°´åˆ† + å¿…è¦ãªã‚‰ã‚½ã‚¤ãƒ©ãƒ†' },
              { name: 'çµ‚äº†å¾Œ30åˆ†ä»¥å†…', detail: 'ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³20-40gï¼ˆç­‹åˆæˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼‰' }
            ]
          },
          {
            id: 'm5-bonus',
            type: 'bonus',
            title: 'ãƒœãƒ¼ãƒŠã‚¹: 90åˆ†ä»¥ä¸Šé”æˆ',
            description: 'èª¿å­ãŒè‰¯ã‘ã‚Œã°90åˆ†ã¾ã§å»¶é•·',
            duration: '+30åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ã‚µã‚¤ã‚¯ãƒªãƒ³ã‚°å»¶é•·', detail: '90åˆ†ã¾ã§å»¶é•·ï¼ˆZone 2ç¶­æŒã®ã¾ã¾ï¼‰' }
            ]
          }
        ]
      },
      {
        date: '2026-02-23',
        dayNumber: 6,
        dayName: 'ACTIVE REST + MENTAL',
        theme: 'F1å…¬å¼ãƒ¡ãƒ³ã‚¿ãƒ«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚° + åå¿œé€Ÿåº¦ãƒ†ã‚¹ãƒˆåˆå›',
        scienceNote: 'Formula1.comå…¬å¼: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ã¨åå¿œé€Ÿåº¦ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’é€±4-5å›å®Ÿæ–½ã€‚åå¿œé€Ÿåº¦ã¯6-8é€±ã§10-20%æ”¹å–„å¯èƒ½ã€‚',
        missions: [
          {
            id: 'm6-req1',
            type: 'required1',
            title: 'å¿…é ˆ1: ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ï¼ˆæ‹¡å¼µç‰ˆï¼‰',
            description: 'é€šå¸¸ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ + ã‚¹ãƒ‘ã‚¤ãƒ³ãƒ­ãƒ¼ãƒ« + èƒ¸æ¤å›æ—‹',
            duration: '15åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'é€šå¸¸ãƒ¢ãƒ“ãƒªãƒ†ã‚£5ç¨®', detail: 'ã‚­ãƒ£ãƒƒãƒˆã‚«ã‚¦ã€ãƒ‡ãƒƒãƒ‰ãƒã‚°ã€ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸ã€è…¸è…°ç­‹ã€ã‚¯ãƒ©ãƒ ã‚·ã‚§ãƒ«' },
              { name: 'ğŸ†• ã‚¹ãƒ‘ã‚¤ãƒ³ãƒ­ãƒ¼ãƒ«', detail: 'é¦–ã‹ã‚‰é †ç•ªã«èƒŒéª¨ã‚’1å€‹ãšã¤å‰å±ˆ â†’ èµ·ãä¸ŠãŒã‚‹ Ã— 3å›' },
              { name: 'ğŸ†• èƒ¸æ¤å›æ—‹', detail: 'æ¨ªå‘ãã€ä¸Šã®è…•ã‚’å¾Œã‚ã«å›ã™ Ã— å„10å›' }
            ]
          },
          {
            id: 'm6-req2',
            type: 'required2',
            title: 'å¿…é ˆ2: ã‚¦ã‚©ãƒ¼ã‚­ãƒ³ã‚°ï¼ˆ30åˆ†ï¼‰',
            description: 'å¿ƒæ‹90-100 bpmï¼ˆå®Œå…¨å›å¾©åŸŸï¼‰',
            duration: '30åˆ†',
            exp: 100,
            scienceBadge: null,
            exercises: [
              { name: 'ãƒšãƒ¼ã‚¹', detail: 'å¿ƒæ‹90-100 bpmï¼ˆä¼šè©±ãŒæ¥½ã«ã§ãã‚‹ãƒšãƒ¼ã‚¹ï¼‰' },
              { name: 'å§¿å‹¢æ„è­˜', detail: 'ãƒ‹ãƒ¥ãƒ¼ãƒˆãƒ©ãƒ«ã‚¹ãƒ‘ã‚¤ãƒ³ï¼ˆãŠã¸ãã‚’å¼•ãè¾¼ã‚€ï¼‰' },
              { name: 'ç€åœ°', detail: 'ã‹ã‹ã¨ â†’ ä¸­è¶³éƒ¨ â†’ ã¤ã¾å…ˆã®é †ã§ç€åœ°' }
            ]
          },
          {
            id: 'm6-bonus',
            type: 'bonus',
            title: 'ğŸ†• ãƒœãƒ¼ãƒŠã‚¹: ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ + åå¿œãƒ†ã‚¹ãƒˆ',
            description: 'F1å…¬å¼ãƒ¡ãƒ³ã‚¿ãƒ«ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°åˆå›ï¼ˆFerrari/McLarenæ¡ç”¨æ‰‹æ³•ï¼‰',
            duration: '10åˆ†',
            exp: 50,
            scienceBadge: 'f1',
            exercises: [
              { name: 'ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³', detail: '5åˆ†: ç›®ã‚’é–‰ã˜ã¦éˆ´é¹¿1å‘¨ã‚’ãƒ–ãƒ¬ãƒ¼ã‚­ãƒ»ã‚¿ãƒ¼ãƒ³ãƒ»ã‚¢ã‚¯ã‚»ãƒ«ã¾ã§è©³ç´°ã«ã‚¤ãƒ¡ãƒ¼ã‚¸' },
              { name: 'åå¿œé€Ÿåº¦ãƒ†ã‚¹ãƒˆ', detail: '5åˆ†: ã‚³ã‚¤ãƒ³è½ã¨ã—ã‚­ãƒ£ãƒƒãƒ Ã— 5å›ã€‚ã¾ãŸã¯humanbenchmark.comï¼ˆç›®æ¨™300msä»¥ä¸‹ï¼‰' }
            ]
          }
        ]
      },
      {
        date: '2026-02-24',
        dayNumber: 7,
        dayName: 'UPPER POWER + FOREARM',
        theme: 'å‰è…•å¼·åŒ–è¿½åŠ ï¼ˆRed Bull 55kgã‚°ãƒªãƒƒãƒ—ç›®æ¨™ã®åŸºç¤ï¼‰',
        scienceNote: 'Red Bullå…¬å¼: F1ãƒ‰ãƒ©ã‚¤ãƒãƒ¼å¹³å‡ã‚°ãƒªãƒƒãƒ—55kgä»¥ä¸Šã€‚ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°æœ€é•·ä¿æŒã§Week 1ã®è¨˜éŒ²ã‚’å–ã‚‹ã€‚Week 2-4ã§ç¶™ç¶šçš„ã«ä¼¸ã°ã™ã€‚',
        missions: [
          {
            id: 'm7-req1',
            type: 'required1',
            title: 'å¿…é ˆ1: ãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³',
            description: 'åã‚Šè…°æ”¹å–„ + å·¦è‚©ãƒªãƒãƒ“ãƒª',
            duration: '10-15åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ã‚­ãƒ£ãƒƒãƒˆã‚«ã‚¦', detail: '10å›' },
              { name: 'ãƒ‡ãƒƒãƒ‰ãƒã‚°', detail: 'å·¦å³10å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚°ãƒ«ãƒ¼ãƒˆãƒ–ãƒªãƒƒã‚¸', detail: '15å›Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'è…¸è…°ç­‹ã‚¹ãƒˆãƒ¬ãƒƒãƒ', detail: 'å·¦å³30ç§’Ã—2ã‚»ãƒƒãƒˆ' },
              { name: 'ã‚¯ãƒ©ãƒ ã‚·ã‚§ãƒ«', detail: 'å·¦å³15å›Ã—2ã‚»ãƒƒãƒˆ' }
            ]
          },
          {
            id: 'm7-req2',
            type: 'required2',
            title: 'å¿…é ˆ2: ä¸ŠåŠèº« + å‰è…•å¼·åŒ– + HIIT',
            description: 'ğŸ†•å‰è…•ã‚«ãƒ¼ãƒ«è¿½åŠ  + ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°æœ€é•·è¨˜éŒ²è¨ˆæ¸¬',
            duration: '25åˆ†',
            exp: 100,
            scienceBadge: 'f1',
            exercises: [
              { name: 'æ‡¸å‚', detail: '3å›Ã—3ã‚»ãƒƒãƒˆï¼ˆ3ç§’ãƒã‚¬ãƒ†ã‚£ãƒ–ï¼‰' },
              { name: 'è…•ç«‹ã¦ä¼ã›', detail: '20å›Ã—3ã‚»ãƒƒãƒˆ' },
              { name: 'ãƒ‡ã‚£ãƒƒãƒ—ã‚¹', detail: '8å›Ã—3ã‚»ãƒƒãƒˆï¼ˆæ¤…å­2è„šï¼‰' },
              { name: 'ğŸ†• ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°ï¼ˆæœ€é•·è¨˜éŒ²ï¼‰', detail: 'è½ã¡ã‚‹ã¾ã§ä¿æŒ Ã— 2ã‚»ãƒƒãƒˆï¼ˆè¨˜éŒ²ã‚’ï¼ï¼‰' },
              { name: 'ğŸ†• ãƒªã‚¹ãƒˆã‚«ãƒ¼ãƒ«', detail: '15å›Ã—2ã‚»ãƒƒãƒˆï¼ˆãƒšãƒƒãƒˆãƒœãƒˆãƒ«500mlã€œ1Lï¼‰' },
              { name: 'ã‚¿ãƒã‚¿HIIT', detail: 'ãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚¯ãƒ©ã‚¤ãƒãƒ¼ 20ç§’Ã—4ãƒ©ã‚¦ãƒ³ãƒ‰' }
            ]
          },
          {
            id: 'm7-bonus',
            type: 'bonus',
            title: 'ãƒœãƒ¼ãƒŠã‚¹: ã‚¿ãƒã‚¿å¼6ãƒ©ã‚¦ãƒ³ãƒ‰ + Week 1å®Œå…¨é”æˆï¼',
            description: '6ãƒ©ã‚¦ãƒ³ãƒ‰é”æˆã§ Week 1 Completeï¼ğŸ',
            duration: '3åˆ†',
            exp: 50,
            scienceBadge: null,
            exercises: [
              { name: 'ãƒã‚¦ãƒ³ãƒ†ãƒ³ã‚¯ãƒ©ã‚¤ãƒãƒ¼å»¶é•·', detail: '6ãƒ©ã‚¦ãƒ³ãƒ‰ã«å»¶é•· â†’ Week 1å®Œå…¨ã‚¯ãƒªã‚¢ï¼' }
            ]
          }
        ]
      }
    ];

    // ========== STATE MANAGEMENT ==========
    let appData = {
      profile: {
        name: 'Boss',
        startDate: '2026-02-18',
        currentRank: 'Rookie',
        totalExp: 0,
        currentStreak: 0,
        longestStreak: 0
      },
      history: []
    };

    function loadData() {
      const saved = localStorage.getItem('gt-racer-app-data');
      if (saved) {
        appData = JSON.parse(saved);
      }
    }

    function saveData() {
      localStorage.setItem('gt-racer-app-data', JSON.stringify(appData));
    }

    function getTodayMissions() {
      const today = new Date().toISOString().split('T')[0];
      return WEEK1_MISSIONS.find(m => m.date === today) || WEEK1_MISSIONS[0];
    }

    function getTodayRecord() {
      const today = new Date().toISOString().split('T')[0];
      return appData.history.find(h => h.date === today);
    }

    function isMissionCompleted(missionId) {
      const record = getTodayRecord();
      return record?.completions.some(c => c.missionId === missionId) || false;
    }

    function getRankByExp(exp) {
      for (const rank of RANKS) {
        if (exp >= rank.minExp && exp <= rank.maxExp) {
          return rank.rank;
        }
      }
      return 'Rookie';
    }

    function getNextRankInfo(currentExp) {
      const currentRank = RANKS.find(r => currentExp >= r.minExp && currentExp <= r.maxExp);
      const currentIndex = RANKS.findIndex(r => r.rank === currentRank?.rank);
      const nextRank = RANKS[currentIndex + 1];

      if (!nextRank) {
        return { nextRank: 'Legend', nextRankExp: Infinity, progress: 100 };
      }

      const progress = ((currentExp - currentRank.minExp) / (nextRank.minExp - currentRank.minExp)) * 100;
      return {
        nextRank: nextRank.rank,
        nextRankExp: nextRank.minExp,
        progress: Math.min(Math.round(progress), 100)
      };
    }

    function completeMission(missionId, exp) {
      const today = new Date().toISOString().split('T')[0];
      const todayRecord = getTodayRecord();

      if (!todayRecord) {
        appData.history.push({
          date: today,
          completions: [{ missionId, exp, completedAt: new Date().toISOString() }],
          totalExp: exp,
          isPerfectDay: false
        });
      } else {
        if (!todayRecord.completions.some(c => c.missionId === missionId)) {
          todayRecord.completions.push({ missionId, exp, completedAt: new Date().toISOString() });
          todayRecord.totalExp += exp;
        }
      }

      const oldRank = appData.profile.currentRank;
      appData.profile.totalExp += exp;
      appData.profile.currentRank = getRankByExp(appData.profile.totalExp);
      const rankUp = oldRank !== appData.profile.currentRank;

      saveData();
      showExpModal(exp, rankUp);
      return rankUp;
    }

    function showExpModal(exp, rankUp) {
      const modal = document.getElementById('exp-modal');
      const expAmount = document.getElementById('exp-amount');
      const rankUpMsg = document.getElementById('rank-up-msg');

      expAmount.textContent = `+${exp} EXP!`;
      rankUpMsg.classList.toggle('hidden', !rankUp);

      modal.classList.remove('hidden');
      setTimeout(() => {
        modal.classList.add('hidden');
        showPage(currentPage);
      }, 2000);
    }

    // ========== UI RENDERING ==========
    let currentPage = 'home';

    function showPage(page) {
      currentPage = page;

      ['home', 'progress', 'science', 'history', 'settings'].forEach(tab => {
        const el = document.getElementById(`tab-${tab}`);
        if (el) {
          if (tab === page) {
            el.classList.remove('tab-inactive');
            el.classList.add('tab-active');
          } else {
            el.classList.remove('tab-active');
            el.classList.add('tab-inactive');
          }
        }
      });

      const app = document.getElementById('app');
      if (page === 'home') app.innerHTML = renderHomePage();
      else if (page === 'progress') app.innerHTML = renderProgressPage();
      else if (page === 'science') app.innerHTML = renderSciencePage();
      else if (page === 'history') app.innerHTML = renderHistoryPage();
      else if (page === 'settings') app.innerHTML = renderSettingsPage();
    }

    function getBadgeHTML(badge) {
      if (!badge) return '';
      if (badge === 'science') return '<span class="science-badge">ğŸ“Š ç§‘å­¦çš„æ ¹æ‹ </span>';
      if (badge === 'f1') return '<span class="f1-badge">ğŸï¸ F1å…¬å¼</span>';
      if (badge === 'safety') return '<span class="safety-badge">ğŸ›¡ï¸ å®‰å…¨æ”¹è¨‚</span>';
      if (badge === 'new') return '<span class="new-badge">ğŸ†• æ–°è¦è¿½åŠ </span>';
      return '';
    }

    function renderHomePage() {
      const todayMissions = getTodayMissions();
      const nextRankInfo = getNextRankInfo(appData.profile.totalExp);
      const rankInfo = RANKS.find(r => r.rank === appData.profile.currentRank);
      const today = new Date().toISOString().split('T')[0];
      const isToday = todayMissions.date === today;

      return `
        <div class="px-4 pt-6 animate-slide-in">
          <!-- Version Badge -->
          <div class="mb-4 text-center">
            <span class="text-xs text-gray-500">v2.0 â€” ç§‘å­¦çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼åæ˜ ç‰ˆï¼ˆ2026-02-18ï¼‰</span>
          </div>

          <!-- Rank & EXP -->
          <div class="bg-bg-card rounded-lg p-6 shadow-lg mb-6">
            <div class="flex justify-center mb-4">
              <div class="inline-flex items-center gap-2 text-white font-bold py-2 px-4 rounded-full shadow-lg" style="background-color: ${rankInfo.color}">
                <span class="text-2xl">${rankInfo.icon}</span>
                <span>${rankInfo.rank}</span>
              </div>
            </div>
            <div class="mb-2">
              <div class="flex justify-between text-sm text-gray-400 mb-1">
                <span>${appData.profile.totalExp} EXP</span>
                <span>${nextRankInfo.nextRankExp === Infinity ? appData.profile.totalExp : nextRankInfo.nextRankExp} EXP</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-4 overflow-hidden">
                <div class="bg-gradient-to-r from-racing-red to-racing-orange h-full transition-all duration-500" style="width: ${nextRankInfo.progress}%"></div>
              </div>
              <div class="text-center text-sm text-gray-400 mt-1">${nextRankInfo.progress}%</div>
            </div>
            <p class="text-center text-sm text-gray-400 mt-2">
              æ¬¡ã®ãƒ©ãƒ³ã‚¯ï¼ˆ${nextRankInfo.nextRank}ï¼‰ã¾ã§ ${nextRankInfo.nextRankExp === Infinity ? 0 : nextRankInfo.nextRankExp - appData.profile.totalExp} EXP
            </p>
          </div>

          <!-- Today's Science Note -->
          ${todayMissions.scienceNote ? `
          <div class="bg-blue-900 bg-opacity-40 border border-blue-700 rounded-lg p-3 mb-4">
            <div class="flex items-start gap-2">
              <span class="text-blue-400 text-sm">ğŸ“Š</span>
              <div>
                <p class="text-blue-200 text-xs font-semibold">ä»Šæ—¥ã®ç§‘å­¦çš„æ ¹æ‹ </p>
                <p class="text-blue-100 text-xs mt-1">${todayMissions.scienceNote}</p>
              </div>
            </div>
          </div>
          ` : ''}

          <!-- Today's Missions -->
          <div class="mb-6">
            <div class="flex items-center gap-2 mb-2">
              <h2 class="text-2xl font-bold text-white">
                Day ${todayMissions.dayNumber}: ${todayMissions.dayName}
              </h2>
            </div>
            <p class="text-sm text-gray-400 mb-1">${todayMissions.date}</p>
            <p class="text-xs text-gray-500 mb-4">${todayMissions.theme}</p>

            <div class="space-y-4">
              ${todayMissions.missions.map(mission => renderMissionCard(mission)).join('')}
            </div>
          </div>

          <!-- Week Overview -->
          <div class="bg-bg-card rounded-lg p-4 mb-6">
            <h3 class="text-sm font-bold text-gray-400 mb-3">WEEK 1 æ¦‚è¦</h3>
            <div class="grid grid-cols-7 gap-1">
              ${WEEK1_MISSIONS.map(day => {
                const dayRecord = appData.history.find(h => h.date === day.date);
                const isCurrentDay = day.date === today;
                const isPast = day.date < today;
                const completed = dayRecord?.completions?.length > 0;
                return `
                  <div class="text-center">
                    <div class="text-xs text-gray-500 mb-1">D${day.dayNumber}</div>
                    <div class="w-8 h-8 rounded-full mx-auto flex items-center justify-center text-xs font-bold ${
                      completed ? 'bg-racing-red text-white' :
                      isCurrentDay ? 'border-2 border-racing-red text-racing-red' :
                      isPast ? 'bg-gray-700 text-gray-500' :
                      'bg-gray-800 text-gray-600'
                    }">
                      ${completed ? 'âœ“' : day.dayNumber}
                    </div>
                  </div>
                `;
              }).join('')}
            </div>
          </div>

          <!-- Complete All Button -->
          <button onclick="completeAllMissions()" class="w-full bg-racing-red hover:bg-red-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg transition-all duration-200 active:scale-95 mb-4">
            å…¨ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Œäº† ğŸ
          </button>
        </div>
      `;
    }

    function renderMissionCard(mission) {
      const isCompleted = isMissionCompleted(mission.id);
      const borderColor = mission.type === 'required1' ? 'border-racing-red' : mission.type === 'required2' ? 'border-racing-orange' : 'border-racing-yellow';

      return `
        <div class="bg-bg-card rounded-lg p-4 shadow-lg border-l-4 ${borderColor} ${isCompleted ? 'opacity-50' : ''}">
          <div class="flex items-start justify-between mb-2">
            <div class="flex-1">
              <h3 class="text-lg font-bold text-white">${mission.title}</h3>
              <p class="text-sm text-gray-400">${mission.description}</p>
              ${mission.scienceBadge ? getBadgeHTML(mission.scienceBadge) : ''}
            </div>
            ${isCompleted ? '<span class="text-2xl ml-2">âœ…</span>' : ''}
          </div>
          <div class="flex items-center justify-between mt-2">
            <div class="flex gap-4 text-sm text-gray-400">
              <span>â±ï¸ ${mission.duration}</span>
              <span class="text-racing-yellow font-semibold">${mission.exp} EXP</span>
            </div>
            <button onclick="toggleMissionDetail('${mission.id}')" class="text-racing-red hover:text-red-400 transition-colors text-sm font-medium">
              è©³ç´° â–¼
            </button>
          </div>
          <div id="detail-${mission.id}" class="hidden mt-4 border-t border-gray-700 pt-4">
            ${mission.exercises.map(ex => `
              <div class="mb-3">
                <p class="text-white font-medium text-sm">${ex.name}</p>
                <p class="text-xs text-gray-400">${ex.detail}</p>
              </div>
            `).join('')}
            ${!isCompleted ? `<button onclick="completeSingleMission('${mission.id}', ${mission.exp})" class="mt-4 w-full bg-racing-orange hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg transition-all">ã“ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³å®Œäº†</button>` : ''}
          </div>
        </div>
      `;
    }

    function renderProgressPage() {
      const rankInfo = RANKS.find(r => r.rank === appData.profile.currentRank);
      const nextRankInfo = getNextRankInfo(appData.profile.totalExp);

      return `
        <div class="px-4 pt-6 animate-slide-in">
          <h2 class="text-3xl font-bold text-white mb-6">é€²æ—</h2>

          <div class="bg-bg-card rounded-lg p-6 shadow-lg mb-6">
            <h3 class="text-xl font-bold text-white mb-4">ç´¯è¨ˆEXP</h3>
            <div class="text-5xl font-bold text-racing-yellow text-center mb-6">
              ${appData.profile.totalExp} EXP
            </div>

            <h3 class="text-xl font-bold text-white mb-4">ç¾åœ¨ã®ãƒ©ãƒ³ã‚¯</h3>
            <div class="flex justify-center mb-6">
              <div class="inline-flex items-center gap-2 text-white font-bold py-3 px-6 rounded-full shadow-lg text-xl" style="background-color: ${rankInfo.color}">
                <span class="text-3xl">${rankInfo.icon}</span>
                <span>${rankInfo.rank}</span>
              </div>
            </div>

            <h3 class="text-xl font-bold text-white mb-4">æ¬¡ã®ãƒ©ãƒ³ã‚¯ã¾ã§</h3>
            <div class="mb-2">
              <div class="flex justify-between text-sm text-gray-400 mb-1">
                <span>${appData.profile.totalExp} EXP</span>
                <span>${nextRankInfo.nextRankExp === Infinity ? appData.profile.totalExp : nextRankInfo.nextRankExp} EXP</span>
              </div>
              <div class="w-full bg-gray-700 rounded-full h-4 overflow-hidden">
                <div class="bg-gradient-to-r from-racing-red to-racing-orange h-full transition-all duration-500" style="width: ${nextRankInfo.progress}%"></div>
              </div>
              <div class="text-center text-sm text-gray-400 mt-1">${nextRankInfo.progress}%</div>
            </div>
          </div>

          <div class="bg-bg-card rounded-lg p-6 shadow-lg mb-6">
            <h3 class="text-xl font-bold text-white mb-4">Week 1 ç›®æ¨™æŒ‡æ¨™</h3>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-gray-400 text-sm">Zone 2 å¿ƒæ‹æ•°</span>
                <span class="text-white text-sm font-medium">130-145 bpm âœ…ä¿®æ­£æ¸ˆ</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-400 text-sm">ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚°ç›®æ¨™</span>
                <span class="text-white text-sm font-medium">30-45ç§’</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-400 text-sm">é¦– ã‚¢ã‚¤ã‚½ãƒ¡ãƒˆãƒªãƒƒã‚¯</span>
                <span class="text-white text-sm font-medium">4æ–¹å‘Ã—10ç§’Ã—3ã‚»ãƒƒãƒˆ</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-400 text-sm">åå¿œé€Ÿåº¦ ç›®æ¨™</span>
                <span class="text-white text-sm font-medium">300msä»¥ä¸‹</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-gray-400 text-sm">è…°ç—›ãƒ¬ãƒ™ãƒ« ç›®æ¨™</span>
                <span class="text-white text-sm font-medium">3/10ä»¥ä¸‹</span>
              </div>
            </div>
          </div>

          <div class="bg-bg-card rounded-lg p-6 shadow-lg mb-6">
            <h3 class="text-xl font-bold text-white mb-4">é€£ç¶šé”æˆæ—¥æ•°</h3>
            <div class="text-4xl font-bold text-racing-orange text-center mb-2">
              ğŸ”¥ ${appData.profile.currentStreak}æ—¥é€£ç¶š
            </div>
            <p class="text-center text-gray-400">æœ€é•·: ${appData.profile.longestStreak}æ—¥</p>
          </div>
        </div>
      `;
    }

    function renderSciencePage() {
      return `
        <div class="px-4 pt-6 animate-slide-in">
          <h2 class="text-3xl font-bold text-white mb-2">ç§‘å­¦çš„æ ¹æ‹ </h2>
          <p class="text-sm text-gray-400 mb-6">ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥: 2026-02-18 | F1å…¬å¼ + æœ€æ–°ã‚¹ãƒãƒ¼ãƒ„ç§‘å­¦ï¼ˆ2024-2025ï¼‰</p>

          <!-- Review Summary -->
          <div class="bg-red-900 bg-opacity-40 border border-red-700 rounded-lg p-4 mb-6">
            <h3 class="text-lg font-bold text-red-300 mb-3">ğŸ”´ ä»Šå›ã®ä¸»è¦æ”¹è¨‚äº‹é …</h3>
            <div class="space-y-2">
              <div class="flex gap-2">
                <span class="text-red-400 text-sm">â¶</span>
                <div>
                  <p class="text-white text-sm font-medium">Zone 2 å¿ƒæ‹æ•°ä¿®æ­£ï¼ˆHIGHï¼‰</p>
                  <p class="text-gray-400 text-xs">110-130 bpm â†’ 130-145 bpmï¼ˆIJSPP 2024ï¼‰</p>
                </div>
              </div>
              <div class="flex gap-2">
                <span class="text-red-400 text-sm">â·</span>
                <div>
                  <p class="text-white text-sm font-medium">Day4ãƒ—ãƒ©ã‚¤ã‚ªãƒ¡ãƒˆãƒªã‚¯ã‚¹å‰Šé™¤ï¼ˆHIGHãƒ»å®‰å…¨ï¼‰</p>
                  <p class="text-gray-400 text-xs">ãƒ©ãƒ³ãƒŠãƒ¼ã‚ºãƒ‹ãƒ¼å¾Œ2é€±é–“é«˜è¡æ’ƒç¦æ­¢ï¼ˆJOSPT 2019ï¼‰</p>
                </div>
              </div>
              <div class="flex gap-2">
                <span class="text-yellow-400 text-sm">â¸</span>
                <div>
                  <p class="text-white text-sm font-medium">é¦–ãƒˆãƒ¬F1åŸºæº–ã«å¼·åŒ–ï¼ˆMEDIUMï¼‰</p>
                  <p class="text-gray-400 text-xs">ç­‰å°ºæ€§åç¸®+ã‚»ãƒƒãƒˆæ•°æ˜ç¢ºåŒ–ï¼ˆPMC Cervical Studyï¼‰</p>
                </div>
              </div>
              <div class="flex gap-2">
                <span class="text-yellow-400 text-sm">â¹</span>
                <div>
                  <p class="text-white text-sm font-medium">ã‚°ãƒªãƒƒãƒ—ãƒ»å‰è…•ãƒˆãƒ¬è¿½åŠ ï¼ˆMEDIUMï¼‰</p>
                  <p class="text-gray-400 text-xs">ãƒ‡ãƒƒãƒ‰ãƒãƒ³ã‚° + ãƒªã‚¹ãƒˆã‚«ãƒ¼ãƒ«ï¼ˆRed Bullå…¬å¼ï¼‰</p>
                </div>
              </div>
              <div class="flex gap-2">
                <span class="text-yellow-400 text-sm">âº</span>
                <div>
                  <p class="text-white text-sm font-medium">åå¿œé€Ÿåº¦ãƒˆãƒ¬å°å…¥ï¼ˆLOWï¼‰</p>
                  <p class="text-gray-400 text-xs">F1å…¬å¼ãƒ¡ãƒ³ã‚¿ãƒ«ãƒˆãƒ¬ + ã‚³ã‚¤ãƒ³è½ã¨ã—åå¿œãƒ†ã‚¹ãƒˆ</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Science Notes -->
          <div class="space-y-4">
            ${SCIENCE_NOTES.map(note => `
              <div class="bg-bg-card rounded-lg p-4 shadow-lg border-l-4 ${note.badge === 'f1' ? 'border-red-700' : note.badge === 'safety' ? 'border-green-700' : 'border-blue-700'}">
                <div class="flex items-start gap-3">
                  <span class="text-2xl">${note.icon}</span>
                  <div class="flex-1">
                    <p class="text-xs text-gray-500 mb-1">${note.category}</p>
                    <h4 class="text-white font-bold text-sm mb-2">${note.title}</h4>
                    <p class="text-gray-400 text-xs leading-relaxed mb-2">${note.content}</p>
                    <p class="text-xs" style="color: ${note.badge === 'f1' ? '#fca5a5' : note.badge === 'safety' ? '#86efac' : '#93c5fd'}">
                      ğŸ“ ${note.source}
                    </p>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>

          <!-- F1 Teams Reference -->
          <div class="bg-bg-card rounded-lg p-4 mt-6 mb-4">
            <h3 class="text-lg font-bold text-white mb-3">ğŸï¸ å‚ç…§F1ãƒãƒ¼ãƒ å…¬å¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</h3>
            <div class="space-y-2 text-sm text-gray-400">
              <p>â€¢ <span class="text-red-400">Red Bull Racing:</span> Driver Fitness & Nutrition Guideï¼ˆå…¬å¼ã‚µã‚¤ãƒˆï¼‰</p>
              <p>â€¢ <span class="text-orange-400">McLaren:</span> How to Train Like an F1 Driverï¼ˆTechnogym Partnershipï¼‰</p>
              <p>â€¢ <span class="text-red-600">Ferrari:</span> Driver Fitness Trainingï¼ˆå…¬å¼ï¼‰</p>
              <p>â€¢ <span class="text-white">Formula1.com:</span> Neck Workouts & Mental Training Guideï¼ˆå…¬å¼ï¼‰</p>
            </div>
          </div>
        </div>
      `;
    }

    function renderHistoryPage() {
      const sortedHistory = [...appData.history].sort((a, b) => new Date(b.date) - new Date(a.date));

      return `
        <div class="px-4 pt-6 animate-slide-in">
          <h2 class="text-3xl font-bold text-white mb-6">å±¥æ­´</h2>

          ${sortedHistory.length === 0 ? '<p class="text-gray-400 text-center">ã¾ã è¨˜éŒ²ãŒã‚ã‚Šã¾ã›ã‚“</p>' : ''}

          <div class="space-y-4">
            ${sortedHistory.map(record => {
              const dayMission = WEEK1_MISSIONS.find(m => m.date === record.date);
              return `
                <div class="bg-bg-card rounded-lg p-4 shadow-lg">
                  <div class="flex justify-between items-start mb-2">
                    <div>
                      <h3 class="text-lg font-bold text-white">${record.date} ${dayMission ? `(Day ${dayMission.dayNumber})` : ''}</h3>
                      ${dayMission ? `<p class="text-sm text-gray-400">${dayMission.dayName}</p>` : ''}
                    </div>
                    ${record.isPerfectDay ? '<span class="text-2xl">ğŸ‰</span>' : ''}
                  </div>
                  <div class="space-y-1 mb-2">
                    ${record.completions.map(c => `
                      <p class="text-sm text-green-400">âœ… (+${c.exp} EXP)</p>
                    `).join('')}
                  </div>
                  ${record.isPerfectDay ? '<p class="text-racing-yellow font-bold">Perfect Day!</p>' : ''}
                  <p class="text-white font-semibold mt-2">åˆè¨ˆ: +${record.totalExp} EXP</p>
                </div>
              `;
            }).join('')}
          </div>
        </div>
      `;
    }

    function renderSettingsPage() {
      return `
        <div class="px-4 pt-6 animate-slide-in">
          <h2 class="text-3xl font-bold text-white mb-6">è¨­å®š</h2>

          <div class="bg-bg-card rounded-lg p-6 shadow-lg mb-6">
            <h3 class="text-xl font-bold text-white mb-4">ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«</h3>
            <p class="text-gray-400 mb-2">åå‰: <span class="text-white">${appData.profile.name}</span></p>
            <p class="text-gray-400 mb-2">é–‹å§‹æ—¥: <span class="text-white">${appData.profile.startDate}</span></p>
            <p class="text-gray-400 mb-2">ãƒãƒ¼ã‚¸ãƒ§ãƒ³: <span class="text-white">v2.0ï¼ˆç§‘å­¦çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‰ˆï¼‰</span></p>
          </div>

          <div class="bg-bg-card rounded-lg p-6 shadow-lg mb-6">
            <h3 class="text-xl font-bold text-white mb-4">ãƒ‡ãƒ¼ã‚¿ç®¡ç†</h3>
            <button onclick="exportData()" class="w-full bg-racing-orange hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg mb-3 transition-all">
              ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
            </button>
            <button onclick="importData()" class="w-full bg-racing-orange hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg mb-3 transition-all">
              ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
            </button>
            <button onclick="resetData()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg transition-all">
              ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ
            </button>
          </div>
        </div>
      `;
    }

    // ========== ACTIONS ==========
    function toggleMissionDetail(missionId) {
      const detail = document.getElementById(`detail-${missionId}`);
      detail.classList.toggle('hidden');
    }

    function completeSingleMission(missionId, exp) {
      if (isMissionCompleted(missionId)) {
        alert('ã“ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã¯æ—¢ã«å®Œäº†ã—ã¦ã„ã¾ã™ï¼');
        return;
      }
      completeMission(missionId, exp);
    }

    function completeAllMissions() {
      const todayMissions = getTodayMissions();
      let totalExp = 0;
      let completedCount = 0;

      for (const mission of todayMissions.missions) {
        if (!isMissionCompleted(mission.id)) {
          completeMission(mission.id, mission.exp);
          totalExp += mission.exp;
          completedCount++;
        }
      }

      if (completedCount === 0) {
        alert('ä»Šæ—¥ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³å…¨ã¦å®Œäº†æ¸ˆã¿ã§ã™ï¼ğŸ');
        return;
      }
    }

    function exportData() {
      const dataStr = JSON.stringify(appData, null, 2);
      const blob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'gt-racer-data-backup.json';
      a.click();
      alert('ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼');
    }

    function importData() {
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'application/json';
      input.onchange = (e) => {
        const file = e.target.files[0];
        const reader = new FileReader();
        reader.onload = (event) => {
          try {
            appData = JSON.parse(event.target.result);
            saveData();
            alert('ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸï¼');
            showPage(currentPage);
          } catch (err) {
            alert('ã‚¨ãƒ©ãƒ¼: ç„¡åŠ¹ãªãƒ•ã‚¡ã‚¤ãƒ«ã§ã™');
          }
        };
        reader.readAsText(file);
      };
      input.click();
    }

    function resetData() {
      if (confirm('æœ¬å½“ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚')) {
        localStorage.removeItem('gt-racer-app-data');
        appData = {
          profile: {
            name: 'Boss',
            startDate: '2026-02-18',
            currentRank: 'Rookie',
            totalExp: 0,
            currentStreak: 0,
            longestStreak: 0
          },
          history: []
        };
        saveData();
        alert('ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
        showPage('home');
      }
    }

    // ========== INITIALIZATION ==========
    loadData();
    showPage('home');
  </script>
</body>
</html>
